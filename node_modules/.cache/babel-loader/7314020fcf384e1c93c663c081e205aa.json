{"ast":null,"code":"import _slicedToArray from\"/Users/mac/Documents/2022/Bulukumba/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{ExclamationCircle}from'react-bootstrap-icons';import{ArrowLeftCircle}from'react-bootstrap-icons';import{Check2Circle}from'react-bootstrap-icons';import{XCircle}from'react-bootstrap-icons';import eye_show from'../../assets/img/icon/eye_show.png';import eye_hide from'../../assets/img/icon/eye_hide.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Reset(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password_repeat=_useState4[0],setPassword_repeat=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),success=_useState10[0],setSuccess=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),validation=_useState12[0],setValidation=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),cektoken=_useState14[0],setCekToken=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),passwordShown=_useState16[0],setPasswordShown=_useState16[1];var togglePasswordVisiblity=function togglePasswordVisiblity(){setPasswordShown(passwordShown?false:true);};var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),rePasswordShown=_useState18[0],setRePasswordShown=_useState18[1];var toggleRePasswordVisiblity=function toggleRePasswordVisiblity(){setRePasswordShown(rePasswordShown?false:true);};var queryParams=new URLSearchParams(window.location.search);var email=queryParams.get('email');var token=queryParams.get('token');var doValidation=function doValidation(){password!==password_repeat?setValidation(true):doSend();};useEffect(function(){var doCekToken=function doCekToken(){var data={email:email,token:token};fetch(\"/_api/main/reset\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)}).then(function(res){return res.json();}).then(function(result){if(result.success){setCekToken(false);return;}if(result.error){setCekToken(404);}}).catch(function(error){setCekToken(true);setCekToken(404);});};var doValidationToken=function doValidationToken(){email===null?window.location.href='/':doCekToken();};doValidationToken();},[email,token]);var doSend=function doSend(){var data={email:email,token:token,password:password};setValidation(false);setLoading(true);setError(false);fetch(\"/_api/main/reset\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)}).then(function(res){return res.json();}).then(function(result){if(result.success){setSuccess(true);setError(false);return;}if(result.error){setError(404);}setLoading(false);}).catch(function(error){setError(true);setLoading(false);});};return/*#__PURE__*/_jsx(\"div\",{className:\"main-container\",\"data-page\":props.appName,\"data-aos\":\"fade-up\",children:cektoken===404?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-title mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Invalid token\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:/*#__PURE__*/_jsx(XCircle,{size:\"30\",color:\"#E05D5D\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"desc px-2\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Silahkan request penggantian password kembali. \",/*#__PURE__*/_jsx(Link,{className:\"link\",to:\"/forgot\",children:\"Lupa password\"}),\" \"]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"main-form\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-center back\",children:/*#__PURE__*/_jsxs(Link,{className:\"link\",to:\"/\",children:[\" \",/*#__PURE__*/_jsx(ArrowLeftCircle,{}),\"  Kembali\"]})})})]}):/*#__PURE__*/_jsx(\"div\",{children:success?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-title mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Reset password\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:/*#__PURE__*/_jsx(Check2Circle,{size:\"30\",color:\"#00A19D\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"desc px-2\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Reset password berhasil! Password akun kamu berhasil dirubah.\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"main-form\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-center back\",children:/*#__PURE__*/_jsxs(Link,{className:\"link\",to:\"/\",children:[\" \",/*#__PURE__*/_jsx(ArrowLeftCircle,{}),\"  Kembali\"]})})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-title mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Reset password\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Silahkan masukkan password baru untuk akun \",/*#__PURE__*/_jsx(\"b\",{children:email}),\".\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"main-form\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex input-password\",children:[/*#__PURE__*/_jsx(\"input\",{error:error,onChange:function onChange(e){return setPassword(e.target.value);},type:passwordShown?\"text\":\"password\",name:\"password\",id:\"password\",placeholder:\"Masukkan password\",className:\"form-control px-3\",required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append form-control-feedback\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-group-text toggle-password\",children:/*#__PURE__*/_jsx(\"img\",{onClick:togglePasswordVisiblity,className:\"icon-btn\",alt:\"eye\",src:passwordShown?eye_hide:eye_show,style:{width:'25px',height:'25px'}})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Ulangi Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex input-password\",children:[/*#__PURE__*/_jsx(\"input\",{error:error,onChange:function onChange(e){return setPassword_repeat(e.target.value);},type:rePasswordShown?\"text\":\"password\",name:\"password_repeat\",id:\"password_repeat\",placeholder:\"Masukkan ulang password\",className:\"form-control px-3\",required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append form-control-feedback\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-group-text toggle-password\",children:/*#__PURE__*/_jsx(\"img\",{onClick:toggleRePasswordVisiblity,className:\"icon-btn\",alt:\"eye\",src:rePasswordShown?eye_hide:eye_show,style:{width:'25px',height:'25px'}})})})]}),validation?/*#__PURE__*/_jsxs(\"div\",{className:\"invalid-feedback d-block\",children:[/*#__PURE__*/_jsx(ExclamationCircle,{}),\" Password tidak sama\"]}):'',error===404?/*#__PURE__*/_jsxs(\"div\",{className:\"invalid-feedback d-block\",children:[/*#__PURE__*/_jsx(ExclamationCircle,{}),\" Email tidak ditemukan\"]}):'']}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-control mb-4\",onClick:function onClick(e){e.preventDefault();doValidation();},children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border text-light loading\",role:\"status\"}),\" Tunggu sebentar\"]}):\"Kirim\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-center back\",children:/*#__PURE__*/_jsxs(Link,{className:\"link\",to:\"/\",children:[\" \",/*#__PURE__*/_jsx(ArrowLeftCircle,{}),\"  Kembali\"]})})]})})]})})});}export default Reset;","map":{"version":3,"sources":["/Users/mac/Documents/2022/Bulukumba/src/components/Reset/index.js"],"names":["React","useEffect","useState","Link","ExclamationCircle","ArrowLeftCircle","Check2Circle","XCircle","eye_show","eye_hide","Reset","props","password","setPassword","password_repeat","setPassword_repeat","loading","setLoading","error","setError","success","setSuccess","validation","setValidation","cektoken","setCekToken","passwordShown","setPasswordShown","togglePasswordVisiblity","rePasswordShown","setRePasswordShown","toggleRePasswordVisiblity","queryParams","URLSearchParams","window","location","search","email","get","token","doValidation","doSend","doCekToken","data","fetch","method","headers","body","JSON","stringify","then","res","json","result","catch","doValidationToken","href","appName","e","target","value","width","height","preventDefault"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { ExclamationCircle } from 'react-bootstrap-icons';\nimport { ArrowLeftCircle } from 'react-bootstrap-icons';\nimport { Check2Circle } from 'react-bootstrap-icons';\nimport { XCircle } from 'react-bootstrap-icons';\n\nimport eye_show from '../../assets/img/icon/eye_show.png';\nimport eye_hide from '../../assets/img/icon/eye_hide.png';\n\nfunction Reset(props) {\n\n    const [password, setPassword] = useState('');\n    const [password_repeat, setPassword_repeat] = useState('');\n    const [loading, setLoading] = useState();\n    const [error, setError] = useState();\n    const [success, setSuccess] = useState();\n    const [validation, setValidation] = useState();\n    const [cektoken, setCekToken] = useState();\n\n\n    const [passwordShown, setPasswordShown] = useState(false);\n    const togglePasswordVisiblity = () => {\n        setPasswordShown(passwordShown ? false : true);\n    };\n\n    const [rePasswordShown, setRePasswordShown] = useState(false);\n    const toggleRePasswordVisiblity = () => {\n        setRePasswordShown(rePasswordShown ? false : true);\n    };\n\n    const queryParams = new URLSearchParams(window.location.search);\n    const email = queryParams.get('email');\n    const token = queryParams.get('token');\n\n    const doValidation = () => {\n        password !== password_repeat ? setValidation(true) : doSend();\n    }\n\n    useEffect(() => {\n        const doCekToken = () => {\n            let data = { email, token };\n\n            fetch(\"/_api/main/reset\", {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(data)\n\n\n            })\n                .then(res => {\n                    return res.json();\n                }\n                ).then(\n                    (result) => {\n                        if (result.success) {\n                            setCekToken(false);\n                            return;\n                        }\n                        if (result.error) {\n                            setCekToken(404);\n                        }\n                    }\n                )\n                .catch(error => {\n                    setCekToken(true)\n                    setCekToken(404)\n                })\n        }\n\n        const doValidationToken = () => {\n            email === null ? window.location.href = '/' : doCekToken();\n        }\n\n        doValidationToken();\n\n\n    }, [email, token])\n\n    const doSend = () => {\n        let data = { email, token, password };\n        setValidation(false);\n        setLoading(true);\n        setError(false);\n\n        fetch(\"/_api/main/reset\", {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data)\n\n\n        })\n            .then(res => {\n                return res.json();\n            }\n            ).then(\n                (result) => {\n                    if (result.success) {\n                        setSuccess(true);\n                        setError(false);\n                        return;\n                    }\n                    if (result.error) {\n                        setError(404);\n                    }\n                    setLoading(false)\n                }\n            )\n            .catch(error => {\n                setError(true)\n                setLoading(false)\n            })\n    }\n\n    return (\n        <div className=\"main-container\" data-page={props.appName} data-aos={\"fade-up\"}>\n            {cektoken === 404 ?\n                <div>\n                    <div className=\"form-title mb-4\">\n                        <div className=\"mb-3\">\n                            <h5>Invalid token</h5>\n                        </div>\n\n                        <div className=\"d-flex\">\n                            <div className=\"icon\">\n                                <XCircle size=\"30\" color=\"#E05D5D\" />\n                            </div>\n                            <div className=\"desc px-2\">\n                                <p>Silahkan request penggantian password kembali. <Link className=\"link\" to=\"/forgot\">Lupa password</Link> </p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"main-form\">\n                        <div className=\"col-12 text-center back\">\n                            <Link className=\"link\" to=\"/\"> <ArrowLeftCircle />  Kembali</Link>\n                        </div>\n                    </div>\n                </div>\n                :\n                <div>\n                    {success ?\n                        <div>\n                            <div className=\"form-title mb-4\">\n                                <div className=\"mb-3\">\n                                    <h5>Reset password</h5>\n                                </div>\n\n                                <div className=\"d-flex\">\n                                    <div className=\"icon\">\n                                        <Check2Circle size=\"30\" color=\"#00A19D\" />\n                                    </div>\n                                    <div className=\"desc px-2\">\n                                        <p>Reset password berhasil! Password akun kamu berhasil dirubah.</p>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"main-form\">\n                                <div className=\"col-12 text-center back\">\n                                    <Link className=\"link\" to=\"/\"> <ArrowLeftCircle />  Kembali</Link>\n                                </div>\n                            </div>\n                        </div>\n                        :\n                        <div>\n                            <div className=\"form-title mb-3\">\n                                <div className=\"mb-3\">\n                                    <h5>Reset password</h5>\n                                </div>\n                                <div>\n                                    <p>Silahkan masukkan password baru untuk akun <b>{email}</b>.</p>\n                                </div>\n                            </div>\n\n                            <div className=\"main-form\">\n                                <form>\n                                    <div className=\"mb-2\">\n                                        <label htmlFor=\"email\">Password</label>\n                                        <div className=\"d-flex input-password\">\n                                            <input error={error} onChange={(e) => setPassword(e.target.value)} type={passwordShown ? \"text\" : \"password\"} name=\"password\" id=\"password\" placeholder=\"Masukkan password\" className=\"form-control px-3\" required />\n                                            <div className=\"input-group-append form-control-feedback\">\n                                                <div className=\"input-group-text toggle-password\">\n                                                    <img onClick={togglePasswordVisiblity} className=\"icon-btn\" alt=\"eye\" src={passwordShown ? eye_hide : eye_show} style={{ width: '25px', height: '25px' }} />\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"mb-4\">\n                                        <label htmlFor=\"email\">Ulangi Password</label>\n                                        <div className=\"d-flex input-password\">\n                                            <input error={error} onChange={(e) => setPassword_repeat(e.target.value)} type={rePasswordShown ? \"text\" : \"password\"} name=\"password_repeat\" id=\"password_repeat\" placeholder=\"Masukkan ulang password\" className=\"form-control px-3\" required />\n                                            <div className=\"input-group-append form-control-feedback\">\n                                                <div className=\"input-group-text toggle-password\">\n                                                    <img onClick={toggleRePasswordVisiblity} className=\"icon-btn\" alt=\"eye\" src={rePasswordShown ? eye_hide : eye_show} style={{ width: '25px', height: '25px' }} />\n                                                </div>\n                                            </div>\n                                        </div>\n                                        {\n                                            validation ?\n                                                <div className=\"invalid-feedback d-block\">\n                                                    <ExclamationCircle /> Password tidak sama\n                                                </div>\n                                                : ''\n                                        }\n                                        {\n                                            error === 404 ?\n                                                <div className=\"invalid-feedback d-block\">\n                                                    <ExclamationCircle /> Email tidak ditemukan\n                                                </div>\n                                                : ''\n                                        }\n                                    </div>\n\n\n                                    <button type=\"submit\" className=\"form-control mb-4\" onClick={(e) => { e.preventDefault(); doValidation() }}>\n                                        {\n                                            loading ?\n                                                <div className=\"loading-container\">\n                                                    <span className=\"spinner-border text-light loading\" role=\"status\"></span> Tunggu sebentar\n                                                </div>\n                                                : \"Kirim\"\n                                        }\n                                    </button>\n\n                                    <div className=\"col-12 text-center back\">\n                                        <Link className=\"link\" to=\"/\"> <ArrowLeftCircle />  Kembali</Link>\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    }\n                </div>\n            }\n\n\n        </div>\n    );\n}\n\nexport default Reset;"]},"metadata":{},"sourceType":"module"}