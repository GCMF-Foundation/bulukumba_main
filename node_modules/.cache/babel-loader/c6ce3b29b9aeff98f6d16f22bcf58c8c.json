{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/2022/Bulukumba/src/components/Reset/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { ExclamationCircle } from 'react-bootstrap-icons';\nimport { ArrowLeftCircle } from 'react-bootstrap-icons';\nimport { Check2Circle } from 'react-bootstrap-icons';\nimport { XCircle } from 'react-bootstrap-icons';\nimport eye_show from '../../assets/img/icon/eye_show.png';\nimport eye_hide from '../../assets/img/icon/eye_hide.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Reset(props) {\n  _s();\n\n  const [password, setPassword] = useState('');\n  const [password_repeat, setPassword_repeat] = useState('');\n  const [loading, setLoading] = useState();\n  const [error, setError] = useState();\n  const [success, setSuccess] = useState();\n  const [validation, setValidation] = useState();\n  const [cektoken, setCekToken] = useState();\n  const [passwordShown, setPasswordShown] = useState(false);\n\n  const togglePasswordVisiblity = () => {\n    setPasswordShown(passwordShown ? false : true);\n  };\n\n  const [rePasswordShown, setRePasswordShown] = useState(false);\n\n  const toggleRePasswordVisiblity = () => {\n    setRePasswordShown(rePasswordShown ? false : true);\n  };\n\n  const queryParams = new URLSearchParams(window.location.search);\n  const email = queryParams.get('email');\n  const token = queryParams.get('token');\n\n  const doValidation = () => {\n    password !== password_repeat ? setValidation(true) : doSend();\n  };\n\n  useEffect(() => {\n    const doCekToken = () => {\n      let data = {\n        email,\n        token\n      };\n      fetch(\"/_api/main/reset\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(res => {\n        return res.json();\n      }).then(result => {\n        if (result.success) {\n          setCekToken(false);\n          return;\n        }\n\n        if (result.error) {\n          setCekToken(404);\n        }\n      }).catch(error => {\n        setCekToken(true);\n        setCekToken(404);\n      });\n    };\n\n    const doValidationToken = () => {\n      email === null ? window.location.href = '/' : doCekToken();\n    };\n\n    doValidationToken();\n  }, [email, token]);\n\n  const doSend = () => {\n    let data = {\n      email,\n      token,\n      password\n    };\n    setValidation(false);\n    setLoading(true);\n    setError(false);\n    fetch(\"/_api/main/reset\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(res => {\n      return res.json();\n    }).then(result => {\n      if (result.success) {\n        setSuccess(true);\n        setError(false);\n        return;\n      }\n\n      if (result.error) {\n        setError(404);\n      }\n\n      setLoading(false);\n    }).catch(error => {\n      setError(true);\n      setLoading(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-container\",\n    \"data-page\": props.appName,\n    \"data-aos\": \"fade-up\",\n    children: cektoken === 404 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-title mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Invalid token\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"icon\",\n            children: /*#__PURE__*/_jsxDEV(XCircle, {\n              size: \"30\",\n              color: \"#E05D5D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"desc px-2\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Silahkan request penggantian password kembali. \", /*#__PURE__*/_jsxDEV(Link, {\n                className: \"link\",\n                to: \"/forgot\",\n                children: \"Lupa password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 83\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-form\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 text-center back\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            className: \"link\",\n            to: \"/\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(ArrowLeftCircle, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 60\n            }, this), \"  Kembali\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: success ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-title mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Reset password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"icon\",\n              children: /*#__PURE__*/_jsxDEV(Check2Circle, {\n                size: \"30\",\n                color: \"#00A19D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"desc px-2\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Reset password berhasil! Password akun kamu berhasil dirubah.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main-form\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 text-center back\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              className: \"link\",\n              to: \"/\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(ArrowLeftCircle, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 68\n              }, this), \"  Kembali\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-title mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Reset password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Silahkan masukkan password baru untuk akun \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 83\n              }, this), \".\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main-form\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"email\",\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex input-password\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  error: error,\n                  onChange: e => setPassword(e.target.value),\n                  type: passwordShown ? \"text\" : \"password\",\n                  name: \"password\",\n                  id: \"password\",\n                  placeholder: \"Masukkan password\",\n                  className: \"form-control px-3\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-group-append form-control-feedback\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"input-group-text toggle-password\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      onClick: togglePasswordVisiblity,\n                      className: \"icon-btn\",\n                      alt: \"eye\",\n                      src: passwordShown ? eye_hide : eye_show,\n                      style: {\n                        width: '25px',\n                        height: '25px'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"email\",\n                children: \"Ulangi Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex input-password\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  error: error,\n                  onChange: e => setPassword_repeat(e.target.value),\n                  type: rePasswordShown ? \"text\" : \"password\",\n                  name: \"password_repeat\",\n                  id: \"password_repeat\",\n                  placeholder: \"Masukkan ulang password\",\n                  className: \"form-control px-3\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-group-append form-control-feedback\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"input-group-text toggle-password\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      onClick: toggleRePasswordVisiblity,\n                      className: \"icon-btn\",\n                      alt: \"eye\",\n                      src: rePasswordShown ? eye_hide : eye_show,\n                      style: {\n                        width: '25px',\n                        height: '25px'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 199,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 41\n              }, this), validation ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"invalid-feedback d-block\",\n                children: [/*#__PURE__*/_jsxDEV(ExclamationCircle, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 53\n                }, this), \" Password tidak sama\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 49\n              }, this) : '', error === 404 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"invalid-feedback d-block\",\n                children: [/*#__PURE__*/_jsxDEV(ExclamationCircle, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 53\n                }, this), \" Email tidak ditemukan\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 49\n              }, this) : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"form-control mb-4\",\n              onClick: e => {\n                e.preventDefault();\n                doValidation();\n              },\n              children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"spinner-border text-light loading\",\n                  role: \"status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 53\n                }, this), \" Tunggu sebentar\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 49\n              }, this) : \"Kirim\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 text-center back\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                className: \"link\",\n                to: \"/\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(ArrowLeftCircle, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 72\n                }, this), \"  Kembali\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Reset, \"KFBaQBMS68wjpSHAaapt+78eBG0=\");\n\n_c = Reset;\nexport default Reset;\n\nvar _c;\n\n$RefreshReg$(_c, \"Reset\");","map":{"version":3,"sources":["/Users/mac/Documents/2022/Bulukumba/src/components/Reset/index.js"],"names":["React","useEffect","useState","Link","ExclamationCircle","ArrowLeftCircle","Check2Circle","XCircle","eye_show","eye_hide","Reset","props","password","setPassword","password_repeat","setPassword_repeat","loading","setLoading","error","setError","success","setSuccess","validation","setValidation","cektoken","setCekToken","passwordShown","setPasswordShown","togglePasswordVisiblity","rePasswordShown","setRePasswordShown","toggleRePasswordVisiblity","queryParams","URLSearchParams","window","location","search","email","get","token","doValidation","doSend","doCekToken","data","fetch","method","headers","body","JSON","stringify","then","res","json","result","catch","doValidationToken","href","appName","e","target","value","width","height","preventDefault"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { ExclamationCircle } from 'react-bootstrap-icons';\nimport { ArrowLeftCircle } from 'react-bootstrap-icons';\nimport { Check2Circle } from 'react-bootstrap-icons';\nimport { XCircle } from 'react-bootstrap-icons';\n\nimport eye_show from '../../assets/img/icon/eye_show.png';\nimport eye_hide from '../../assets/img/icon/eye_hide.png';\n\nfunction Reset(props) {\n\n    const [password, setPassword] = useState('');\n    const [password_repeat, setPassword_repeat] = useState('');\n    const [loading, setLoading] = useState();\n    const [error, setError] = useState();\n    const [success, setSuccess] = useState();\n    const [validation, setValidation] = useState();\n    const [cektoken, setCekToken] = useState();\n\n\n    const [passwordShown, setPasswordShown] = useState(false);\n    const togglePasswordVisiblity = () => {\n        setPasswordShown(passwordShown ? false : true);\n    };\n\n    const [rePasswordShown, setRePasswordShown] = useState(false);\n    const toggleRePasswordVisiblity = () => {\n        setRePasswordShown(rePasswordShown ? false : true);\n    };\n\n    const queryParams = new URLSearchParams(window.location.search);\n    const email = queryParams.get('email');\n    const token = queryParams.get('token');\n\n    const doValidation = () => {\n        password !== password_repeat ? setValidation(true) : doSend();\n    }\n\n    useEffect(() => {\n        const doCekToken = () => {\n            let data = { email, token };\n\n            fetch(\"/_api/main/reset\", {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(data)\n\n\n            })\n                .then(res => {\n                    return res.json();\n                }\n                ).then(\n                    (result) => {\n                        if (result.success) {\n                            setCekToken(false);\n                            return;\n                        }\n                        if (result.error) {\n                            setCekToken(404);\n                        }\n                    }\n                )\n                .catch(error => {\n                    setCekToken(true)\n                    setCekToken(404)\n                })\n        }\n\n        const doValidationToken = () => {\n            email === null ? window.location.href = '/' : doCekToken();\n        }\n\n        doValidationToken();\n\n\n    }, [email, token])\n\n    const doSend = () => {\n        let data = { email, token, password };\n        setValidation(false);\n        setLoading(true);\n        setError(false);\n\n        fetch(\"/_api/main/reset\", {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data)\n\n\n        })\n            .then(res => {\n                return res.json();\n            }\n            ).then(\n                (result) => {\n                    if (result.success) {\n                        setSuccess(true);\n                        setError(false);\n                        return;\n                    }\n                    if (result.error) {\n                        setError(404);\n                    }\n                    setLoading(false)\n                }\n            )\n            .catch(error => {\n                setError(true)\n                setLoading(false)\n            })\n    }\n\n    return (\n        <div className=\"main-container\" data-page={props.appName} data-aos={\"fade-up\"}>\n            {cektoken === 404 ?\n                <div>\n                    <div className=\"form-title mb-4\">\n                        <div className=\"mb-3\">\n                            <h5>Invalid token</h5>\n                        </div>\n\n                        <div className=\"d-flex\">\n                            <div className=\"icon\">\n                                <XCircle size=\"30\" color=\"#E05D5D\" />\n                            </div>\n                            <div className=\"desc px-2\">\n                                <p>Silahkan request penggantian password kembali. <Link className=\"link\" to=\"/forgot\">Lupa password</Link> </p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"main-form\">\n                        <div className=\"col-12 text-center back\">\n                            <Link className=\"link\" to=\"/\"> <ArrowLeftCircle />  Kembali</Link>\n                        </div>\n                    </div>\n                </div>\n                :\n                <div>\n                    {success ?\n                        <div>\n                            <div className=\"form-title mb-4\">\n                                <div className=\"mb-3\">\n                                    <h5>Reset password</h5>\n                                </div>\n\n                                <div className=\"d-flex\">\n                                    <div className=\"icon\">\n                                        <Check2Circle size=\"30\" color=\"#00A19D\" />\n                                    </div>\n                                    <div className=\"desc px-2\">\n                                        <p>Reset password berhasil! Password akun kamu berhasil dirubah.</p>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"main-form\">\n                                <div className=\"col-12 text-center back\">\n                                    <Link className=\"link\" to=\"/\"> <ArrowLeftCircle />  Kembali</Link>\n                                </div>\n                            </div>\n                        </div>\n                        :\n                        <div>\n                            <div className=\"form-title mb-3\">\n                                <div className=\"mb-3\">\n                                    <h5>Reset password</h5>\n                                </div>\n                                <div>\n                                    <p>Silahkan masukkan password baru untuk akun <b>{email}</b>.</p>\n                                </div>\n                            </div>\n\n                            <div className=\"main-form\">\n                                <form>\n                                    <div className=\"mb-2\">\n                                        <label htmlFor=\"email\">Password</label>\n                                        <div className=\"d-flex input-password\">\n                                            <input error={error} onChange={(e) => setPassword(e.target.value)} type={passwordShown ? \"text\" : \"password\"} name=\"password\" id=\"password\" placeholder=\"Masukkan password\" className=\"form-control px-3\" required />\n                                            <div className=\"input-group-append form-control-feedback\">\n                                                <div className=\"input-group-text toggle-password\">\n                                                    <img onClick={togglePasswordVisiblity} className=\"icon-btn\" alt=\"eye\" src={passwordShown ? eye_hide : eye_show} style={{ width: '25px', height: '25px' }} />\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"mb-4\">\n                                        <label htmlFor=\"email\">Ulangi Password</label>\n                                        <div className=\"d-flex input-password\">\n                                            <input error={error} onChange={(e) => setPassword_repeat(e.target.value)} type={rePasswordShown ? \"text\" : \"password\"} name=\"password_repeat\" id=\"password_repeat\" placeholder=\"Masukkan ulang password\" className=\"form-control px-3\" required />\n                                            <div className=\"input-group-append form-control-feedback\">\n                                                <div className=\"input-group-text toggle-password\">\n                                                    <img onClick={toggleRePasswordVisiblity} className=\"icon-btn\" alt=\"eye\" src={rePasswordShown ? eye_hide : eye_show} style={{ width: '25px', height: '25px' }} />\n                                                </div>\n                                            </div>\n                                        </div>\n                                        {\n                                            validation ?\n                                                <div className=\"invalid-feedback d-block\">\n                                                    <ExclamationCircle /> Password tidak sama\n                                                </div>\n                                                : ''\n                                        }\n                                        {\n                                            error === 404 ?\n                                                <div className=\"invalid-feedback d-block\">\n                                                    <ExclamationCircle /> Email tidak ditemukan\n                                                </div>\n                                                : ''\n                                        }\n                                    </div>\n\n\n                                    <button type=\"submit\" className=\"form-control mb-4\" onClick={(e) => { e.preventDefault(); doValidation() }}>\n                                        {\n                                            loading ?\n                                                <div className=\"loading-container\">\n                                                    <span className=\"spinner-border text-light loading\" role=\"status\"></span> Tunggu sebentar\n                                                </div>\n                                                : \"Kirim\"\n                                        }\n                                    </button>\n\n                                    <div className=\"col-12 text-center back\">\n                                        <Link className=\"link\" to=\"/\"> <ArrowLeftCircle />  Kembali</Link>\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    }\n                </div>\n            }\n\n\n        </div>\n    );\n}\n\nexport default Reset;"]},"metadata":{},"sourceType":"module"}