{"ast":null,"code":"import _slicedToArray from\"/Users/mac/Documents/2022/Bulukumba/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Link}from'react-router-dom';import{ExclamationCircle}from'react-bootstrap-icons';import{ArrowLeftCircle}from'react-bootstrap-icons';import{Envelope}from'react-bootstrap-icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Forgot(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),validationEmail=_useState4[0],setValidationEmail=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),success=_useState10[0],setSuccess=_useState10[1];var doValidation=function doValidation(){setValidationEmail(false);if(email===''){setValidationEmail(true);setEmail('');}else{doSend();}};var doSend=function doSend(){var data={email:email};setLoading(true);setValidationEmail(false);setError(false);fetch(\"/_api/main/forgot\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)}).then(function(res){return res.json();}).then(function(result){if(result.success){// window.location.href = result.redirect_uri;\nsetSuccess(true);setError(false);return;}if(result.error){setError(404);}setLoading(false);}).catch(function(error){setError(true);setLoading(false);});};return/*#__PURE__*/_jsx(\"div\",{className:\"main-container\",\"data-page\":props.appName,\"data-aos\":\"fade-up\",children:success?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-title mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Lupa password\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:/*#__PURE__*/_jsx(Envelope,{size:\"30\",color:\"#505254\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"desc px-2\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Email berhasil dikirim! Silahkan periksa email untuk petunjuk penggantian password\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"main-form\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-center back\",children:/*#__PURE__*/_jsxs(Link,{className:\"link\",to:\"/\",children:[\" \",/*#__PURE__*/_jsx(ArrowLeftCircle,{}),\"  Kembali\"]})})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-title mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Lupa password\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Silahkan masukkan email yang kamu gunakan untuk mendaftar. Kami akan mengirimkan email pentunjuk untuk mengganti password.\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"main-form\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{error:error,value:email,onChange:function onChange(e){return setEmail(e.target.value);},type:\"email\",name:\"email\",id:\"email\",placeholder:\"Masukkan email\",className:\"form-control px-3\",autoFocus:true,required:true}),validationEmail?/*#__PURE__*/_jsxs(\"div\",{className:\"invalid-feedback d-block\",children:[/*#__PURE__*/_jsx(ExclamationCircle,{}),\" Email wajib diisi\"]}):null,error===404?/*#__PURE__*/_jsxs(\"div\",{className:\"invalid-feedback d-block\",children:[/*#__PURE__*/_jsx(ExclamationCircle,{}),\" Email tidak ditemukan\"]}):'']}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-control mb-4\",onClick:function onClick(e){e.preventDefault();doValidation();},children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border text-light loading\",role:\"status\"}),\" Tunggu sebentar\"]}):\"Kirim\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-center back\",children:/*#__PURE__*/_jsxs(Link,{className:\"link\",to:\"/\",children:[\" \",/*#__PURE__*/_jsx(ArrowLeftCircle,{}),\"  Kembali\"]})})]})})]})});}export default Forgot;","map":{"version":3,"sources":["/Users/mac/Documents/2022/Bulukumba/src/components/Forgot/index.js"],"names":["React","useState","Link","ExclamationCircle","ArrowLeftCircle","Envelope","Forgot","props","email","setEmail","validationEmail","setValidationEmail","loading","setLoading","error","setError","success","setSuccess","doValidation","doSend","data","fetch","method","headers","body","JSON","stringify","then","res","json","result","catch","appName","e","target","value","preventDefault"],"mappings":"sHAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,iBAAT,KAAkC,uBAAlC,CACA,OAASC,eAAT,KAAgC,uBAAhC,CACA,OAASC,QAAT,KAAyB,uBAAzB,C,wFAEA,QAASC,CAAAA,MAAT,CAAgBC,KAAhB,CAAuB,CACnB,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,eAA8CR,QAAQ,EAAtD,yCAAOS,eAAP,eAAwBC,kBAAxB,eACA,eAA8BV,QAAQ,EAAtC,yCAAOW,OAAP,eAAgBC,UAAhB,eACA,eAA0BZ,QAAQ,EAAlC,yCAAOa,KAAP,eAAcC,QAAd,eACA,eAA8Bd,QAAQ,EAAtC,0CAAOe,OAAP,gBAAgBC,UAAhB,gBAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvBP,kBAAkB,CAAC,KAAD,CAAlB,CACA,GAAIH,KAAK,GAAK,EAAd,CAAkB,CACdG,kBAAkB,CAAC,IAAD,CAAlB,CACAF,QAAQ,CAAC,EAAD,CAAR,CACH,CAHD,IAGO,CACHU,MAAM,GACT,CAEJ,CATD,CAUA,GAAMA,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjB,GAAIC,CAAAA,IAAI,CAAG,CAAEZ,KAAK,CAALA,KAAF,CAAX,CACAK,UAAU,CAAC,IAAD,CAAV,CACAF,kBAAkB,CAAC,KAAD,CAAlB,CACAI,QAAQ,CAAC,KAAD,CAAR,CAEAM,KAAK,CAAC,mBAAD,CAAsB,CACvBC,MAAM,CAAE,MADe,CAEvBC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFc,CAKvBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,IAAf,CALiB,CAAtB,CAAL,CAQKO,IARL,CAQU,SAAAC,GAAG,CAAI,CACT,MAAOA,CAAAA,GAAG,CAACC,IAAJ,EAAP,CACH,CAVL,EAWMF,IAXN,CAYQ,SAACG,MAAD,CAAY,CACR,GAAIA,MAAM,CAACd,OAAX,CAAoB,CAChB;AACAC,UAAU,CAAC,IAAD,CAAV,CACAF,QAAQ,CAAC,KAAD,CAAR,CACA,OACH,CAED,GAAIe,MAAM,CAAChB,KAAX,CAAkB,CACdC,QAAQ,CAAC,GAAD,CAAR,CACH,CAEDF,UAAU,CAAC,KAAD,CAAV,CACH,CAzBT,EA2BKkB,KA3BL,CA2BW,SAAAjB,KAAK,CAAI,CACZC,QAAQ,CAAC,IAAD,CAAR,CACAF,UAAU,CAAC,KAAD,CAAV,CACH,CA9BL,EA+BH,CArCD,CAuCA,mBACI,YAAK,SAAS,CAAC,gBAAf,CAAgC,YAAWN,KAAK,CAACyB,OAAjD,CAA0D,WAAU,SAApE,UACKhB,OAAO,cACJ,oCACI,aAAK,SAAS,CAAC,iBAAf,wBACI,YAAK,SAAS,CAAC,MAAf,uBACI,qCADJ,EADJ,cAII,aAAK,SAAS,CAAC,QAAf,wBACI,YAAK,SAAS,CAAC,MAAf,uBACI,KAAC,QAAD,EAAU,IAAI,CAAC,IAAf,CAAoB,KAAK,CAAC,SAA1B,EADJ,EADJ,cAII,YAAK,SAAS,CAAC,WAAf,uBACI,yGADJ,EAJJ,GAJJ,GADJ,cAcI,YAAK,SAAS,CAAC,WAAf,uBACI,YAAK,SAAS,CAAC,yBAAf,uBACI,MAAC,IAAD,EAAM,SAAS,CAAC,MAAhB,CAAuB,EAAE,CAAC,GAA1B,4BAA+B,KAAC,eAAD,IAA/B,eADJ,EADJ,EAdJ,GADI,cAsBJ,oCACI,aAAK,SAAS,CAAC,iBAAf,wBACI,YAAK,SAAS,CAAC,MAAf,uBACI,qCADJ,EADJ,cAII,kCACI,iJADJ,EAJJ,GADJ,cASI,YAAK,SAAS,CAAC,WAAf,uBACI,qCACI,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,OAAO,CAAC,OAAf,mBADJ,cAEI,cAAO,KAAK,CAAEF,KAAd,CAAqB,KAAK,CAAEN,KAA5B,CAAmC,QAAQ,CAAE,kBAACyB,CAAD,QAAOxB,CAAAA,QAAQ,CAACwB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAA7C,CAA8E,IAAI,CAAC,OAAnF,CAA2F,IAAI,CAAC,OAAhG,CAAwG,EAAE,CAAC,OAA3G,CAAmH,WAAW,CAAC,gBAA/H,CAAgJ,SAAS,CAAC,mBAA1J,CAA8K,SAAS,KAAvL,CAAwL,QAAQ,KAAhM,EAFJ,CAIQzB,eAAe,cACX,aAAK,SAAS,CAAC,0BAAf,wBACI,KAAC,iBAAD,IADJ,wBADW,CAIT,IARd,CAWQI,KAAK,GAAK,GAAV,cACI,aAAK,SAAS,CAAC,0BAAf,wBACI,KAAC,iBAAD,IADJ,4BADJ,CAIM,EAfd,GADJ,cAmBI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,mBAAhC,CAAoD,OAAO,CAAE,iBAACmB,CAAD,CAAO,CAAEA,CAAC,CAACG,cAAF,GAAoBlB,YAAY,GAAI,CAA1G,UAEQN,OAAO,cACH,aAAK,SAAS,CAAC,mBAAf,wBACI,aAAM,SAAS,CAAC,mCAAhB,CAAoD,IAAI,CAAC,QAAzD,EADJ,sBADG,CAID,OANd,EAnBJ,cA4BI,YAAK,SAAS,CAAC,yBAAf,uBACI,MAAC,IAAD,EAAM,SAAS,CAAC,MAAhB,CAAuB,EAAE,CAAC,GAA1B,4BAA+B,KAAC,eAAD,IAA/B,eADJ,EA5BJ,GADJ,EATJ,GAvBR,EADJ,CAuEH,CAED,cAAeN,CAAAA,MAAf","sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { ExclamationCircle } from 'react-bootstrap-icons';\nimport { ArrowLeftCircle } from 'react-bootstrap-icons';\nimport { Envelope } from 'react-bootstrap-icons';\n\nfunction Forgot(props) {\n    const [email, setEmail] = useState('');\n    const [validationEmail, setValidationEmail] = useState();\n    const [loading, setLoading] = useState();\n    const [error, setError] = useState();\n    const [success, setSuccess] = useState();\n\n    const doValidation = () => {\n        setValidationEmail(false)\n        if (email === '') {\n            setValidationEmail(true)\n            setEmail('');\n        } else {\n            doSend()\n        }\n\n    }\n    const doSend = () => {\n        let data = { email };\n        setLoading(true);\n        setValidationEmail(false)\n        setError(false)\n\n        fetch(\"/_api/main/forgot\", {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data)\n\n        })\n            .then(res => {\n                return res.json();\n            }\n            ).then(\n                (result) => {\n                    if (result.success) {\n                        // window.location.href = result.redirect_uri;\n                        setSuccess(true);\n                        setError(false);\n                        return;\n                    }\n\n                    if (result.error) {\n                        setError(404);\n                    }\n\n                    setLoading(false)\n                }\n            )\n            .catch(error => {\n                setError(true)\n                setLoading(false)\n            })\n    }\n    \n    return (\n        <div className=\"main-container\" data-page={props.appName} data-aos={\"fade-up\"}>\n            {success ?\n                <div>\n                    <div className=\"form-title mb-4\">\n                        <div className=\"mb-3\">\n                            <h5>Lupa password</h5>\n                        </div>\n                        <div className=\"d-flex\">\n                            <div className=\"icon\">\n                                <Envelope size=\"30\" color=\"#505254\" />\n                            </div>\n                            <div className=\"desc px-2\">\n                                <p>Email berhasil dikirim! Silahkan periksa email untuk petunjuk penggantian password</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"main-form\">\n                        <div className=\"col-12 text-center back\">\n                            <Link className=\"link\" to=\"/\"> <ArrowLeftCircle />  Kembali</Link>\n                        </div>\n                    </div>\n                </div>\n                :\n                <div>\n                    <div className=\"form-title mb-3\">\n                        <div className=\"mb-3\">\n                            <h5>Lupa password</h5>\n                        </div>\n                        <div>\n                            <p>Silahkan masukkan email yang kamu gunakan untuk mendaftar. Kami akan mengirimkan email pentunjuk untuk mengganti password.</p>\n                        </div>\n                    </div>\n                    <div className=\"main-form\">\n                        <form>\n                            <div className=\"mb-4\">\n                                <label htmlFor=\"email\">Email</label>\n                                <input error={error} value={email} onChange={(e) => setEmail(e.target.value)} type=\"email\" name=\"email\" id=\"email\" placeholder=\"Masukkan email\" className=\"form-control px-3\" autoFocus required />\n                                {\n                                    validationEmail ?\n                                        <div className=\"invalid-feedback d-block\">\n                                            <ExclamationCircle /> Email wajib diisi\n                                        </div>\n                                        : null\n                                }\n                                {\n                                    error === 404 ?\n                                        <div className=\"invalid-feedback d-block\">\n                                            <ExclamationCircle /> Email tidak ditemukan\n                                        </div>\n                                        : ''\n                                }\n                            </div>\n                            <button type=\"submit\" className=\"form-control mb-4\" onClick={(e) => { e.preventDefault(); doValidation() }}>\n                                {\n                                    loading ?\n                                        <div className=\"loading-container\">\n                                            <span className=\"spinner-border text-light loading\" role=\"status\"></span> Tunggu sebentar\n                                        </div>\n                                        : \"Kirim\"\n                                }\n                            </button>\n                            <div className=\"col-12 text-center back\">\n                                <Link className=\"link\" to=\"/\"> <ArrowLeftCircle />  Kembali</Link>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            }\n        </div>\n    );\n}\n\nexport default Forgot;"]},"metadata":{},"sourceType":"module"}